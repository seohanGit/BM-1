<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baron.member.sqlModel">
	<!-- BOOKMST 관련 쿼리 -->

	
	<select id="selectBookAll" resultType="BookModel">
		SELECT * FROM BOOKMST
	</select>
	
	<insert id="insertBook" parameterType="BookModel">
		INSERT INTO BOOKMST
		(bookname,BOOK_CD,genre,publisher,writer,grade,borrowcheck,imageurl,
		buydate, isbn, priceSales, summary)
		VALUES
		(#{bookname},#{bookCode},#{genre},#{publisher},#{writer},0,0,#{imageurl},
		NOW(), #{isbn}, #{priceSales}, #{summary})
	</insert>


	<select id="selectBook" parameterType="String" resultType="BookModel">
		SELECT * FROM BOOKMST WHERE BOOK_CD=#{bookCode}
	</select>

	<select id="searchBook" parameterType="String" resultType="BookModel">
		SELECT *
		WHERE
		bookname LIKE
		CONCAT('%',#{keyword},'%')
		ORDER BY
		buydate DESC
	</select>

	<select id="listBook" parameterType="Dto" resultType="BookModel">
		SELECT
		*,
		(SELECT COUNT(*) FROM BOOKMST) AS count
		FROM BOOKMST
		ORDER BY
		buydate DESC
	</select>


	<delete id="deleteBook" parameterType="String">
		DELETE FROM BOOKMST
		WHERE
		BOOK_CD=#{bookCode}
	</delete>


	<update id="updateBook" parameterType="BookModel">
		UPDATE BOOKMST
		SET
		TITLE=#{bookname}, genre=#{genre},
		publisher=#{publisher},writer=#{writer}
		WHERE BOOK_CD=#{bookCode}
	</update>

	<select id="getNewbook" resultType="BookModel">
		SELECT *
		FROM BOOKMST
		ORDER BY
		rece_ymd DESC
	</select>

	<select id="getBestSeller" resultType="BookModel">
		SELECT *
		FROM BOOKMST
		ORDER BY
		sunbo DESC
	</select>
</mapper>