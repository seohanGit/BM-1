<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baron.member.sqlModel">



	<select id="selectMemberById" resultType="int" parameterType="string">
		SELECT COUNT(*)
		FROM tprlib.gr_insa
		WHERE id = #{id}
	</select>

	<insert id="insertMember" parameterType="MemberModel">
		INSERT INTO
		tprlib.gr_insa
		(id,
		pass, name,email,team_nm,cell)
		VALUES (#{id},
		#{password},
		#{name},#{email},#{team_nm},#{cell})
	</insert>
	<select id="selectPass" resultType="String" parameterType="String">
		SELECT pass
		FROM tprlib.gr_insa
		WHERE id = #{id}
	</select>

	<update id="updateMember" parameterType="MemberModel">
		UPDATE
		tprlib.gr_insa
		SET
		pass =
		#{password},email = #{email},address =
		#{address},cell =
		#{cell},home =
		#{home}
		WHERE id = #{id}
	</update>

	<select id="selectMember" resultType="MemberModel"
		parameterType="String">
		select mst.co_gb, mst.kname, mst.team_nm, mst.jikb, tmj.kname as chief, tmj.asabn as chiefId
                 from (select * from tprlib.GR_INSA where RETI_GB not in ('R') and ASABN=#{id})MST 
                  left outer join (select * from AALIB.GR_EMP where RETI_GB not in ('R') and CO_GB in ('SEOHAN','KAMTEC') and FAGB_CD in ('3','6') and JIKC_CD in ('13')) TMJ 
                  on MST.ASOSK=TMJ.ASOSK and MST.CO_GB=TMJ.CO_GB WHERE tmj.kname != '' FETCH first 1 rows only
	</select>

	<select id="selectLate" resultType="MemberModel">
		SELECT
		A.id,A.name,A.email,A.address,A.cell,A.home, B.rentdate,
		B.returndate
		FROM tprlib.gr_insa as A ,BOOKRENT as B
		WHERE current date >
		B.returndate
		AND B.rentchk ='2' and
		A.id=B.id
	</select>



	<select id="selectMemberList" resultType="MemberModel">
		SELECT *, (SELECT
		COUNT(*) FROM testlib.BOOKRENT B WHERE B.rentdate >
		date_sub(current
		date,
		interval 30
		day) AND B.id=A.id ) AS numborrow
		FROM tprlib.gr_insa A
		ORDER BY
		team_nm

	</select>

	<!-- 기타 쿼리 -->



</mapper>